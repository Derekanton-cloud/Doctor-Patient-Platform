<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doctor Dashboard | Doctor-Patient Interface</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <style>
    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    html,
    body {
      height: 100%;
      width: 100%;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #abdded, #92e1e9);
    }

    /* Navbar Styles */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: linear-gradient(135deg, #000000, #1a1a1a);
      color: whitesmoke;
      position: sticky;
      top: 0;
      width: 100%;
      z-index: 1000;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .navbar-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      text-decoration: none;
      color: white;
    }

    .navbar-logo img {
      width: 40px;
      height: auto;
    }

    .navbar-logo h1 {
      font-size: 24px;
      margin: 0;
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }

    .navbar-logo:hover h1 {
      color: #a4d2ff;
      text-shadow: 0 4px 12px rgba(30, 144, 255, 0.7);
    }

    .navbar-links {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .navbar-links a {
      color: white;
      text-decoration: none;
      font-size: 16px;
      transition: color 0.3s, transform 0.3s;
    }

    .navbar-links a:hover {
      color: #a4d2ff;
      transform: translateY(-2px);
      text-shadow: 0 4px 12px rgba(30, 144, 255, 0.7);
    }

    .navbar-links a.appointment-btn {
      padding: 8px 16px;
      border-radius: 30px;
      transition: all 0.3s;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .navbar-links a.appointment-btn:hover {
      background: #047cde;
      color: white;
      border-color: #047cde;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(4, 124, 222, 0.3);
    }

    .navbar-links a.appointment-btn i {
      font-size: 16px;
    }

    /* Profile Dropdown */
    .profile-dropdown {
      position: relative;
      display: inline-block;
    }

    .profile-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      object-fit: cover;
      background-color: #047cde;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .profile-icon:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(164, 210, 255, 0.8);
    }

    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background-color: white;
      min-width: 180px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 10px;
    }

    .dropdown-content a {
      color: #333;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      transition: background 0.3s;
    }

    .dropdown-content a:hover {
      background-color: #f1f1f1;
      color: #047cde;
    }

    .show {
      display: block;
      animation: fadeIn 0.3s;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
      width: 100%;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      margin-right: 2rem;
      height: fit-content;
      position: sticky;
      top: 85px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 1rem;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      color: #333;
      text-decoration: none;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .sidebar-menu a:hover,
    .sidebar-menu a.active {
      background: linear-gradient(to right, #e6f7ff, #d1e7f5);
      color: #047cde;
    }

    .sidebar-menu a i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }

    .doctor-profile {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 2rem;
    }

    .doctor-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #047cde;
      margin-bottom: 1rem;
    }

    .doctor-info {
      text-align: center;
    }

    .doctor-name {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .doctor-specialty {
      color: #666;
      font-size: 0.9rem;
    }

    /* Dashboard Content */
    .dashboard-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .welcome-section {
      background: linear-gradient(to right, #ffffff, #f8f9fa);
      border-radius: 15px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      animation: fadeInUp 0.8s;
      border-left: 5px solid #047cde;
      transition: all 0.5s ease;
    }

    .welcome-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z' fill='%23047cde' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
      opacity: 0.5;
      z-index: 0;
    }

    .welcome-content {
      position: relative;
      z-index: 1;
    }

    .dashboard-title {
      margin: 0;
      color: #333;
      font-size: 2rem;
      position: relative;
      font-weight: 600;
    }

    .dashboard-title::after {
      content: '';
      display: block;
      width: 50px;
      height: 3px;
      background: linear-gradient(90deg, #1E90FF, #4682B4);
      margin-top: 10px;
    }

    .welcome-section:hover {
      background: linear-gradient(to right, #1a1a1a, #000000);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-left: 5px solid #047cde;
    }

    .welcome-section:hover .dashboard-title,
    .welcome-section:hover .welcome-message {
      color: white;
    }

    .welcome-section:hover .dashboard-title::after {
      background: linear-gradient(90deg, #1E90FF, #4682B4);
    }

    /* Add a glossy overlay effect when hovered */
    .welcome-section:hover::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 100%);
      z-index: 1;
      pointer-events: none;
    }

    .welcome-section:hover .welcome-content {
      position: relative;
      z-index: 2;
    }

    .welcome-section:hover .welcome-icon {
      background: linear-gradient(145deg, #1E90FF, #4682B4);
      box-shadow: 0 8px 20px rgba(30, 144, 255, 0.4);
    }

    .welcome-message {
      margin-top: 1rem;
      font-size: 1.1rem;
      color: #666;
      max-width: 80%;
    }

    .welcome-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .action-button {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 0.8rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
      color: #333;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .action-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      background: #047cde;
      color: white;
      border-color: #047cde;
    }

    /* Stats Overview */
    .stats-overview {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s 0.3s both;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .stat-card:nth-child(1):hover {
      border-bottom: 4px solid #4CAF50;
    }

    .stat-card:nth-child(2):hover {
      border-bottom: 4px solid #2196F3;
    }

    .stat-card:nth-child(3):hover {
      border-bottom: 4px solid #FF9800;
    }

    .stat-card:nth-child(4):hover {
      border-bottom: 4px solid #E91E63;
    }

    .stat-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .stat-card:nth-child(1) .stat-icon {
      background-color: rgba(76, 175, 80, 0.1);
      color: #4CAF50;
    }

    .stat-card:nth-child(2) .stat-icon {
      background-color: rgba(33, 150, 243, 0.1);
      color: #2196F3;
    }

    .stat-card:nth-child(3) .stat-icon {
      background-color: rgba(255, 152, 0, 0.1);
      color: #FF9800;
    }

    .stat-card:nth-child(4) .stat-icon {
      background-color: rgba(233, 30, 99, 0.1);
      color: #E91E63;
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: #666;
      font-size: 0.9rem;
    }

    /* Section Styles */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      animation: fadeIn 0.8s 0.5s both;
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #333;
    }

    .see-all {
      color: #047cde;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .see-all:hover {
      transform: translateX(5px);
    }

    /* Appointment Section */
    .appointments-section {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s 0.7s both;
    }

    .appointments-tabs {
      display: flex;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 1.5rem;
    }

    .tab {
      padding: 0.8rem 1.2rem;
      cursor: pointer;
      transition: all 0.3s;
      border-bottom: 2px solid transparent;
      color: #666;
      font-weight: 500;
    }

    .tab.active {
      border-bottom: 2px solid #047cde;
      color: #047cde;
    }

    .tab:hover:not(.active) {
      color: #333;
    }

    .appointment-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1rem;
    }

    .appointment-card {
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 1.2rem;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .appointment-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      border-color: #047cde;
    }

    .appointment-status {
      position: absolute;
      top: 0;
      right: 0;
      width: 70px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-confirmed {
      background-color: #4CAF50;
    }

    .status-pending {
      background-color: #FF9800;
    }

    .status-completed {
      background-color: #9E9E9E;
    }

    .status-cancelled {
      background-color: #F44336;
    }

    .appointment-time {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      color: #666;
      font-size: 0.9rem;
    }

    .appointment-time i {
      margin-right: 5px;
      color: #047cde;
    }

    .patient-info {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }

    .patient-avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      margin-right: 1rem;
      object-fit: cover;
    }

    .patient-name {
      font-weight: 600;
      margin-bottom: 3px;
    }

    .appointment-type {
      color: #666;
      font-size: 0.85rem;
    }

    .appointment-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }

    .appointment-button {
      padding: 0.6rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.85rem;
      transition: all 0.3s;
    }

    .video-call-btn {
      background-color: #4CAF50;
      color: white;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .video-call-btn:hover {
      background-color: #388E3C;
      transform: translateY(-2px);
    }

    .video-call-btn.disabled {
      background-color: #e9ecef;
      color: #adb5bd;
      cursor: not-allowed;
    }

    .details-btn {
      background-color: transparent;
      color: #047cde;
      border: 1px solid #047cde;
    }

    .details-btn:hover {
      background-color: #f8f9fa;
      transform: translateY(-2px);
    }

    /* Patient Table Styles */
    .patients-section {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      margin-bottom: 2rem;
      overflow: hidden;
      animation: fadeInUp 0.8s 0.9s both;
    }

    .patients-table-container {
      overflow-x: auto;
    }

    .patients-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }

    .patients-table th,
    .patients-table td {
      padding: 1rem;
      text-align: left;
    }

    .patients-table th {
      background-color: #f8f9fa;
      color: #6c757d;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .patients-table tbody tr {
      border-bottom: 1px solid #e9ecef;
      transition: all 0.3s;
    }

    .patients-table tbody tr:last-child {
      border-bottom: none;
    }

    .patients-table tbody tr:hover {
      background-color: #f8f9fa;
    }

    .patient-cell {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .patient-mini-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      object-fit: cover;
    }

    .patient-cell-info {
      display: flex;
      flex-direction: column;
    }

    .patient-cell-name {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .patient-cell-email {
      font-size: 0.8rem;
      color: #6c757d;
    }

    .health-status {
      font-size: 0.8rem;
      font-weight: 600;
      padding: 4px 8px;
      border-radius: 20px;
    }

    .health-status.stable {
      background-color: rgba(76, 175, 80, 0.1);
      color: #4CAF50;
    }

    .health-status.needs-attention {
      background-color: rgba(255, 152, 0, 0.1);
      color: #FF9800;
    }

    .health-status.critical {
      background-color: rgba(244, 67, 54, 0.1);
      color: #F44336;
    }

    .health-status.recovering {
      background-color: rgba(33, 150, 243, 0.1);
      color: #2196F3;
    }

    .table-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .table-action-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      color: #6c757d;
      font-size: 0.9rem;
      background-color: #f8f9fa;
    }

    .table-action-btn:hover {
      background-color: #047cde;
      color: white;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .empty-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #f8f9fa;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: #adb5bd;
      margin-bottom: 1rem;
    }

    .empty-table-message {
      text-align: center;
    }

    /* Medical Records Section */
    .medical-records-section {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s 1.1s both;
    }

    .records-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .record-card {
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 1.2rem;
      transition: all 0.3s;
      display: flex;
      flex-direction: column;
    }

    .record-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      border-color: #047cde;
    }

    .record-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
      font-size: 0.8rem;
    }

    .record-type,
    .record-date {
      display: flex;
      align-items: center;
      gap: 5px;
      color: #6c757d;
    }

    .record-patient {
      display: flex;
      align-items: center;
      gap: 10px;
      padding-bottom: 1rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #e9ecef;
    }

    .record-patient-name {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .record-patient-email {
      font-size: 0.8rem;
      color: #6c757d;
    }

    .record-summary {
      font-size: 0.9rem;
      color: #495057;
      margin-bottom: 1rem;
      flex-grow: 1;
    }

    .record-actions {
      display: flex;
      justify-content: space-between;
    }

    .record-button {
      padding: 8px 12px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
    }

    .record-button:first-child {
      background-color: transparent;
      color: #047cde;
      border: 1px solid #047cde;
    }

    .record-button:last-child {
      background-color: #f8f9fa;
      color: #6c757d;
      border: 1px solid #e9ecef;
    }

    .record-button:hover {
      transform: translateY(-2px);
    }

    .record-button:first-child:hover {
      background-color: #047cde;
      color: white;
    }

    .record-button:last-child:hover {
      background-color: #e9ecef;
      color: #212529;
    }

    .empty-state.wide {
      grid-column: 1 / -1;
    }

    /* Animation Keyframes */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Prescriptions Section */
    .prescriptions-section {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s 1.3s both;
    }

    .prescription-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .prescription-card {
      border: 1px solid #e9ecef;
      border-radius: 12px;
      transition: all 0.3s;
      overflow: hidden;
    }

    .prescription-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      border-color: #047cde;
    }

    .prescription-header {
      display: flex;
      justify-content: space-between;
      padding: 1rem;
      background-color: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
    }

    .prescription-id {
      font-weight: 600;
      color: #047cde;
    }

    .prescription-date {
      color: #6c757d;
      font-size: 0.9rem;
    }

    .prescription-patient {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 1rem;
      border-bottom: 1px solid #e9ecef;
    }

    .prescription-patient-name {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .prescription-diagnosis {
      font-size: 0.85rem;
      color: #6c757d;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .prescription-medications {
      padding: 1rem;
    }

    .medications-header {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      color: #495057;
    }

    .medications-list {
      list-style: none;
    }

    .medication-item {
      padding: 0.5rem 0;
      border-bottom: 1px dashed #e9ecef;
    }

    .medication-item:last-child {
      border-bottom: none;
    }

    .medication-name {
      font-weight: 500;
      margin-bottom: 2px;
    }

    .medication-dosage {
      font-size: 0.85rem;
      color: #6c757d;
    }

    .medication-more {
      text-align: center;
      color: #047cde;
      font-size: 0.85rem;
      padding: 0.5rem 0;
    }

    .prescription-actions {
      display: flex;
      border-top: 1px solid #e9ecef;
    }

    .prescription-action-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      padding: 0.75rem;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s;
    }

    .prescription-action-btn:first-child {
      border-right: 1px solid #e9ecef;
    }

    .view-btn {
      color: #047cde;
    }

    .edit-btn {
      color: #6c757d;
    }

    .prescription-action-btn:hover {
      background-color: #f8f9fa;
    }

    /* Communications Section */
    .communications-section {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 1.5rem;
      margin-bottom: 2rem;
      animation: fadeInUp 0.8s 1.5s both;
    }

    .messages-list {
      margin-top: 1rem;
    }

    .message-item {
      border: 1px solid #e9ecef;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      transition: all 0.3s;
    }

    .message-item:last-child {
      margin-bottom: 0;
    }

    .message-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .message-item.unread {
      border-left: 3px solid #2196F3;
      background-color: rgba(33, 150, 243, 0.03);
    }

    .message-sender {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 0.7rem;
    }

    .sender-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }

    .sender-info {
      flex: 1;
    }

    .sender-name {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .message-time {
      color: #6c757d;
      font-size: 0.8rem;
    }

    .message-preview {
      color: #495057;
      margin-bottom: 0.7rem;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .message-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .unread-badge {
      background-color: #2196F3;
      color: white;
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: 600;
    }

    .message-reply-btn {
      color: #6c757d;
      text-decoration: none;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
    }

    .message-reply-btn:hover {
      color: #047cde;
      transform: translateX(3px);
    }

    .dashboard-footer {
      margin-top: auto;
      background: linear-gradient(135deg, #1a1a1a, #000000);
      color: #fff;
      border-radius: 0;
      width: 100%;
    }

    /* Footer Styles - Matching index.ejs */
    .footer {
      background: linear-gradient(135deg, #000000, #1a1a1a);
      color: #fff;
      padding: 30px 0;
      position: relative;
      margin-top: auto;
      /* Pushes footer to bottom when content is short */
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      padding: 0 20px;
    }

    .footer-section {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .footer-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .footer-logo img {
      width: 40px;
      height: auto;
    }

    .footer-logo h3 {
      font-size: 1.5rem;
      margin: 0;
      color: #fff;
    }

    .footer-section h4 {
      color: #a4d2ff;
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .footer-section p {
      margin: 5px 0;
      color: #999;
      line-height: 1.6;
    }

    .footer-section .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .social-links a {
      color: #fff;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .social-links a:hover {
      color: #a4d2ff;
    }

    .footer-bottom {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-bottom p {
      color: #666;
      font-size: 0.9rem;
    }

    .guest-badge {
      display: inline-block;
      background-color: #ff9800;
      color: white;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      margin-left: 8px;
      vertical-align: middle;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar">
    <a href="/doctor/dashboard" class="navbar-logo">
      <img src="/assets/logo.png" alt="Logo">
      <h1>Doctor-Patient Interface</h1>
    </a>
    <div class="navbar-links">
      <a href="/doctors/appointments" class="appointment-btn">
        <i class="fas fa-calendar-check"></i> My Appointments
      </a>
      <div class="profile-dropdown">
        <div class="profile-icon" onclick="toggleDropdown()">
          <% if(user.profileImage) { %>
            <img src="<%= user.profileImage %>" alt="Profile" class="profile-icon">
            <% } else { %>
              <i class="fas fa-user-md" style="color: white;"></i>
              <% } %>
        </div>
        <div id="dropdown-menu" class="dropdown-content">
          <a href="/doctors/profile"><i class="fas fa-user-md"></i> My Profile</a>
          <a href="/doctors/settings"><i class="fas fa-cog"></i> Settings</a>
          <a href="/auth/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="doctor-profile">
        <% if(user.profileImage) { %>
          <img src="<%= user.profileImage %>" alt="Doctor" class="doctor-avatar">
          <% } else { %>
            <div class="doctor-avatar"
              style="background-color: #047cde; display: flex; justify-content: center; align-items: center;">
              <i class="fas fa-user-md" style="color: white; font-size: 36px;"></i>
            </div>
            <% } %>
              <div class="doctor-info">
                <div class="doctor-name">Dr. <%= user.firstName %>
                    <%= user.lastName %>
                </div>
                <div class="doctor-specialty">
                  <%= user.specialty %>
                </div>
              </div>
      </div>

      <ul class="sidebar-menu">
        <li><a href="/doctors/dashboard" class="active"><i class="fas fa-columns"></i> Dashboard</a></li>
        <li><a href="/doctors/appointments"><i class="fas fa-calendar-check"></i> My Appointments</a></li>
        <li><a href="/doctors/patients"><i class="fas fa-users"></i> My Patients</a></li>
        <li><a href="/doctors/prescriptions"><i class="fas fa-file-prescription"></i> Prescriptions</a></li>
        <li><a href="/doctors/medicalrecords"><i class="fas fa-notes-medical"></i> Medical Records</a></li>
        <li><a href="/doctors/communications"><i class="fas fa-comment-medical"></i> Communications</a></li>
        <li><a href="/doctors/analytics"><i class="fas fa-chart-line"></i> Analytics</a></li>
        <li><a href="/doctors/profile"><i class="fas fa-user-md"></i> Profile</a></li>
        <li><a href="/doctors/settings"><i class="fas fa-cog"></i> Settings</a></li>
      </ul>
    </aside>

    <!-- Dashboard Content -->
    <main class="dashboard-content">
      <!-- Welcome Section -->
      <section class="welcome-section">
        <div class="welcome-content">
          <h1 class="dashboard-title">Welcome, Dr. <%= user.firstName %>!</h1>
          <p class="welcome-message">
            Manage your appointments, patients, and prescriptions efficiently. Your next appointment
            is scheduled in <%= nextAppointmentTime %>.
          </p>
        </div>
      </section>

      <!-- Stats Overview -->
      <div class="stats-overview">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-calendar-check"></i>
          </div>
          <div class="stat-value">
            <%= stats.todayAppointments %>
          </div>
          <div class="stat-label">Today's Appointments</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-value">
            <%= stats.totalPatients %>
          </div>
          <div class="stat-label">Total Patients</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-file-prescription"></i>
          </div>
          <div class="stat-value">
            <%= stats.prescriptionsIssued %>
          </div>
          <div class="stat-label">Prescriptions Issued</div>
        </div>
        <!-- Replace the Consultation Rate card with Completed Appointments -->
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-value">
            <%= stats.completedAppointments %>
          </div>
          <div class="stat-label">Completed Sessions</div>
        </div>
      </div>

      <!-- Appointments Section -->
      <section class="appointments-section">
        <div class="section-header">
          <h2 class="section-title">Today's Appointments</h2>
          <a href="/doctors/appointments" class="see-all">See all <i class="fas fa-chevron-right"></i></a>
        </div>

        <div class="appointments-tabs">
          <div class="tab active" data-tab="upcoming">Upcoming</div>
          <div class="tab" data-tab="today">Today</div>
          <div class="tab" data-tab="pending">Pending</div>
          <div class="tab" data-tab="completed">Completed</div>
        </div>

        <div class="appointment-cards">
          <% if (appointments && appointments.length> 0) { %>
            <% appointments.forEach(appointment=> { %>
              <div class="appointment-card">
                <div class="appointment-status <%= 'status-' + appointment.status.toLowerCase() %>">
                  <%= appointment.status %>
                </div>
                <div class="appointment-time">
                  <i class="far fa-clock"></i>
                  <%= new Date(appointment.appointmentDate).toLocaleDateString() %>
                    at <%= new Date(appointment.appointmentDate).toLocaleTimeString([], {hour: '2-digit' ,
                      minute:'2-digit'}) %>
                </div>
                <div class="patient-info">
                  <% if (appointment.isGuestBooking) { %>
                    <!-- Guest booking - show guest information -->
                    <div class="patient-avatar">
                      <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="patient-details">
                      <h4 class="patient-name">
                        <%= appointment.guestInformation.name %> <span class="guest-badge">Guest</span>
                      </h4>
                      <p class="patient-contact"><i class="fas fa-envelope"></i>
                        <%= appointment.guestInformation.email %>
                      </p>
                      <% if (appointment.guestInformation.phone) { %>
                        <p class="patient-contact"><i class="fas fa-phone"></i>
                          <%= appointment.guestInformation.phone %>
                        </p>
                        <% } %>
                    </div>
                    <% } else if (appointment.patient) { %>
                      <!-- Regular patient - show patient profile -->
                      <% if (appointment.patient.profileImage) { %>
                        <img src="<%= appointment.patient.profileImage %>" alt="Patient" class="patient-avatar">
                        <% } else { %>
                          <div class="patient-avatar">
                            <i class="fas fa-user-circle"></i>
                          </div>
                          <% } %>
                            <div class="patient-details">
                              <h4 class="patient-name">
                                <%= appointment.patient.firstName %>
                                  <%= appointment.patient.lastName %>
                              </h4>
                              <p class="patient-contact"><i class="fas fa-envelope"></i>
                                <%= appointment.patient.email %>
                              </p>
                              <% if (appointment.patient.phone) { %>
                                <p class="patient-contact"><i class="fas fa-phone"></i>
                                  <%= appointment.patient.phone %>
                                </p>
                                <% } %>
                            </div>
                            <% } else { %>
                              <!-- No patient information available -->
                              <div class="patient-avatar">
                                <i class="fas fa-user-circle"></i>
                              </div>
                              <div class="patient-details">
                                <h4 class="patient-name">Unknown Patient</h4>
                                <p class="patient-contact">No information available</p>
                              </div>
                              <% } %>
                </div>
                <div class="appointment-actions">
                  <% // Check if the appointment is active (within 15 minutes buffer) 
                     const now=new Date(); 
                     const appointmentTime=new Date(appointment.startTime);
                     const bufferEnd=new Date(appointmentTime);
                     bufferEnd.setMinutes(bufferEnd.getMinutes() + 15); 
                     const isAppointmentActive=now>= appointmentTime && now <= bufferEnd && appointment.status==='Confirmed' ;
                   %>
                      <% if (isAppointmentActive) { %>
                        <a href="/video-call/<%= appointment._id %>" class="appointment-button video-call-btn">
                          <i class="fas fa-video"></i> Join Video Call
                        </a>
                        <% } else { %>
                          <button class="appointment-button video-call-btn disabled" disabled
                            title="Video call is only available at the scheduled appointment time">
                            <i class="fas fa-video"></i> Video Call
                          </button>
                          <% } %>
                            <a href="/doctors/appointments/<%= appointment._id %>" class="appointment-button details-btn">Details</a>
                </div>
              </div>
              <% }) %>
                <% } else { %>
                  <div class="empty-state">
                    <div class="empty-icon">
                      <i class="far fa-calendar"></i>
                    </div>
                    <p>No appointments scheduled for today.</p>
                  </div>
                  <% } %>
        </div>
      </section>

      <!-- Recent Patients Section -->
      <section class="patients-section">
        <div class="section-header">
          <h2 class="section-title">Recent Patients</h2>
          <a href="/doctors/patients" class="see-all">See all <i class="fas fa-chevron-right"></i></a>
        </div>
        <!-- Recent Patients Section - Table Style -->
        <div class="patients-table-container">
          <table class="patients-table">
            <thead>
              <tr>
                <th>Patient</th>
                <th>Last Visit</th>
                <th>Health Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <% if (recentPatients && recentPatients.length> 0) { %>
                <% recentPatients.forEach(patient=> { %>
                  <tr>
                    <td>
                      <div class="patient-cell">
                        <% if (patient.profileImage) { %>
                          <img src="<%= patient.profileImage %>" alt="Patient" class="patient-mini-avatar">
                          <% } else { %>
                            <div class="patient-mini-avatar"
                              style="background-color: #e9ecef; display: flex; justify-content: center; align-items: center;">
                              <i class="fas fa-user" style="color: #adb5bd; font-size: 12px;"></i>
                            </div>
                            <% } %>
                              <div class="patient-cell-info">
                                <div class="patient-cell-name">
                                  <%= patient.firstName %>
                                    <%= patient.lastName %>
                                </div>
                                <div class="patient-cell-email">
                                  <%= patient.email %>
                                </div>
                              </div>
                      </div>
                    </td>
                    <td>
                      <%= new Date(patient.lastVisit).toLocaleDateString() %>
                    </td>
                    <td>
                      <span class="health-status <%= patient.healthStatus.toLowerCase().replace(' ', '-') %>">
                        <%= patient.healthStatus %>
                      </span>
                    </td>
                    <td>
                      <div class="table-actions">
                        <a href="/doctors/patients/<%= patient._id %>" class="table-action-btn" title="View Profile">
                          <i class="fas fa-eye"></i>
                        </a>
                        <a href="/doctors/medicalrecords/<%= patient._id %>" class="table-action-btn"
                          title="Medical Records">
                          <i class="fas fa-notes-medical"></i>
                        </a>
                        <a href="/doctors/prescriptions/new/<%= patient._id %>" class="table-action-btn"
                          title="Create Prescription">
                          <i class="fas fa-file-prescription"></i>
                        </a>
                      </div>
                    </td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr>
                        <td colspan="4" class="empty-table-message">
                          <div class="empty-state">
                            <div class="empty-icon">
                              <i class="fas fa-users"></i>
                            </div>
                            <p>No patients found.</p>
                          </div>
                        </td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Medical Records Section -->
      <section class="medical-records-section">
        <div class="section-header">
          <h2 class="section-title">Recent Medical Records</h2>
          <a href="/doctors/medicalrecords" class="see-all">See all <i class="fas fa-chevron-right"></i></a>
        </div>

        <div class="records-grid">
          <% if (recentRecords && recentRecords.length> 0) { %>
            <% recentRecords.forEach(record=> { %>
              <div class="record-card">
                <div class="record-header">
                  <div class="record-type">
                    <i class="fas fa-file-medical"></i>
                    <%= record.recordType %>
                  </div>
                  <div class="record-date">
                    <i class="far fa-calendar-alt"></i>
                    <%= new Date(record.createdAt).toLocaleDateString() %>
                  </div>
                </div>

                <div class="record-patient">
                  <% if (record.patient.profileImage) { %>
                    <img src="<%= record.patient.profileImage %>" alt="Patient" class="patient-mini-avatar">
                    <% } else { %>
                      <div class="patient-mini-avatar"
                        style="background-color: #e9ecef; display: flex; justify-content: center; align-items: center;">
                        <i class="fas fa-user" style="color: #adb5bd;"></i>
                      </div>
                      <% } %>
                        <div>
                          <div class="record-patient-name">
                            <%= record.patient.firstName %>
                              <%= record.patient.lastName %>
                          </div>
                          <div class="record-patient-email">
                            <%= record.patient.email %>
                          </div>
                        </div>
                </div>

                <div class="record-summary">
                  <%= record.summary.length> 120 ? record.summary.substring(0, 120) + '...' : record.summary %>
                </div>

                <div class="record-actions">
                  <a href="/doctors/medicalrecords/<%= record._id %>" class="record-button">
                    <i class="fas fa-eye"></i> View Record
                  </a>
                  <a href="/doctors/medicalrecords/edit/<%= record._id %>" class="record-button">
                    <i class="fas fa-edit"></i> Update
                  </a>
                </div>
              </div>
              <% }) %>
                <% } else { %>
                  <div class="empty-state wide">
                    <div class="empty-icon">
                      <i class="fas fa-notes-medical"></i>
                    </div>
                    <p>No medical records found.</p>
                  </div>
                  <% } %>
        </div>
      </section>
      <!-- Prescriptions Section -->
      <section class="prescriptions-section">
        <div class="section-header">
          <h2 class="section-title">Recent Prescriptions</h2>
          <a href="/doctors/prescriptions" class="see-all">See all <i class="fas fa-chevron-right"></i></a>
        </div>

        <div class="prescription-cards">
          <% if (recentPrescriptions && recentPrescriptions.length> 0) { %>
            <% recentPrescriptions.forEach(prescription=> { %>
              <div class="prescription-card">
                <div class="prescription-header">
                  <div class="prescription-id">#<%= prescription._id.toString().slice(-6).toUpperCase() %>
                  </div>
                  <div class="prescription-date">
                    <%= new Date(prescription.createdAt).toLocaleDateString() %>
                  </div>
                </div>
                <div class="prescription-patient">
                  <% if (prescription.patient.profileImage) { %>
                    <img src="<%= prescription.patient.profileImage %>" alt="Patient" class="patient-mini-avatar">
                    <% } else { %>
                      <div class="patient-mini-avatar"
                        style="background-color: #e9ecef; display: flex; justify-content: center; align-items: center;">
                        <i class="fas fa-user" style="color: #adb5bd;"></i>
                      </div>
                      <% } %>
                        <div>
                          <div class="prescription-patient-name">
                            <%= prescription.patient.firstName %>
                              <%= prescription.patient.lastName %>
                          </div>
                          <div class="prescription-diagnosis"><i class="fas fa-stethoscope"></i>
                            <%= prescription.diagnosis %>
                          </div>
                        </div>
                </div>
                <div class="prescription-medications">
                  <div class="medications-header">Medications</div>
                  <ul class="medications-list">
                    <% prescription.medications.slice(0, 2).forEach(med=> { %>
                      <li class="medication-item">
                        <div class="medication-name">
                          <%= med.name %>
                        </div>
                        <div class="medication-dosage">
                          <%= med.dosage %> - <%= med.frequency %>
                        </div>
                      </li>
                      <% }) %>
                        <% if (prescription.medications.length> 2) { %>
                          <li class="medication-more">+<%= prescription.medications.length - 2 %> more medications</li>
                          <% } %>
                  </ul>
                </div>
                <div class="prescription-actions">
                  <a href="/doctors/prescriptions/<%= prescription._id %>" class="prescription-action-btn view-btn">
                    <i class="fas fa-eye"></i> View
                  </a>
                  <a href="/doctors/prescriptions/edit/<%= prescription._id %>"
                    class="prescription-action-btn edit-btn">
                    <i class="fas fa-edit"></i> Edit
                  </a>
                </div>
              </div>
              <% }) %>
                <% } else { %>
                  <div class="empty-state wide">
                    <div class="empty-icon">
                      <i class="fas fa-file-prescription"></i>
                    </div>
                    <p>No prescriptions issued yet.</p>
                  </div>
                  <% } %>
        </div>
      </section>

      <!-- Communications Section -->
      <section class="communications-section">
        <div class="section-header">
          <h2 class="section-title">Recent Messages</h2>
          <a href="/doctors/communications" class="see-all">See all <i class="fas fa-chevron-right"></i></a>
        </div>

        <div class="messages-container">
          <% if (recentMessages && recentMessages.length> 0) { %>
            <div class="messages-list">
              <% recentMessages.forEach(message=> { %>
                <div class="message-item <%= message.isRead ? 'read' : 'unread' %>">
                  <div class="message-sender">
                    <% if (message.sender.profileImage) { %>
                      <img src="<%= message.sender.profileImage %>" alt="Sender" class="sender-avatar">
                      <% } else { %>
                        <div class="sender-avatar"
                          style="background-color: #e9ecef; display: flex; justify-content: center; align-items: center;">
                          <i class="fas fa-user" style="color: #adb5bd; font-size: 14px;"></i>
                        </div>
                        <% } %>
                          <div class="sender-info">
                            <div class="sender-name">
                              <%= message.sender.firstName %>
                                <%= message.sender.lastName %>
                            </div>
                            <div class="message-time">
                              <%= new Date(message.createdAt).toLocaleTimeString([], {hour: '2-digit' ,
                                minute:'2-digit'}) %>
                            </div>
                          </div>
                  </div>
                  <div class="message-preview">
                    <%= message.content.length> 80 ? message.content.substring(0, 80) + '...' : message.content %>
                  </div>
                  <div class="message-actions">
                    <% if (!message.isRead) { %>
                      <span class="unread-badge">New</span>
                      <% } %>
                        <a href="/doctors/communications/<%= message._id %>" class="message-reply-btn">
                          <i class="fas fa-reply"></i> Reply
                        </a>
                  </div>
                </div>
                <% }) %>
            </div>
            <% } else { %>
              <div class="empty-state">
                <div class="empty-icon">
                  <i class="fas fa-comment-medical"></i>
                </div>
                <p>No recent messages.</p>
              </div>
              <% } %>
        </div>
      </section>
    </main>
  </div>
  <!-- Footer section -->
  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <div class="footer-logo">
          <img src="/assets/logo.png" alt="Logo">
          <h3>Doctor-Patient Interface</h3>
        </div>
        <p>Revolutionizing healthcare through seamless connectivity and innovative technology.</p>
      </div>

      <div class="footer-section">
        <h4>Contact Us</h4>
        <p>Email: doctorpatientinterface@gmail.com</p>
        <p>Phone: 9901527481</p>
        <p>Address: Shavige Malleshwara Hills, 91st Main Rd, Bengaluru, Karnataka 560078</p>
      </div>

      <div class="footer-section">
        <h4>Quick Links</h4>
        <p><a href="/doctors/dashboard" style="color: #999; text-decoration: none;">Dashboard</a></p>
        <p><a href="/doctors/appointments" style="color: #999; text-decoration: none;">My Appointments</a></p>
        <p><a href="/doctors/patients" style="color: #999; text-decoration: none;">My Patients</a></p>
        <p><a href="/doctors/prescriptions" style="color: #999; text-decoration: none;">Prescriptions</a></p>
        <p><a href="/doctors/medicalrecords" style="color: #999; text-decoration: none;">Medical Records</a></p>
        <p><a href="/doctors/profile" style="color: #999; text-decoration: none;">Profile</a></p>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Doctor-Patient Interface. All Rights Reserved.</p>
      <p>Developed By Team DPI</p>
    </div>
  </footer>

  <!-- JavaScript for Interactivity -->
  <script>
    // Toggle dropdown menu
    function toggleDropdown() {
      document.getElementById("dropdown-menu").classList.toggle("show");
    }

    // Close dropdown when clicking outside
    window.onclick = function (event) {
      if (!event.target.matches('.profile-icon')) {
        const dropdowns = document.getElementsByClassName("dropdown-content");
        for (let i = 0; i < dropdowns.length; i++) {
          const openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }

    // Tab functionality for appointments
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs
        tabs.forEach(t => t.classList.remove('active'));
        // Add active class to clicked tab
        tab.classList.add('active');

        // Here you would typically filter appointments based on the selected tab
        // This would require AJAX or pre-rendered content for each tab
        const tabType = tab.dataset.tab;
        console.log(`Tab ${tabType} selected`);

        // Example of what you might do:
        // fetchAppointments(tabType);
      });
    });

    // Check if an appointment is active for video call
    function checkAppointmentActive() {
      const now = new Date();
      const appointmentCards = document.querySelectorAll('.appointment-card');

      appointmentCards.forEach(card => {
        const statusElement = card.querySelector('.appointment-status');
        if (!statusElement) return;

        const status = statusElement.textContent.trim();

        if (status === 'Confirmed') {
          const timeElement = card.querySelector('.appointment-time');
          if (!timeElement) return;

          // Extract appointment time from the text (this is a simplified example)
          const timeText = timeElement.textContent;
          const dateMatch = timeText.match(/(\d{1,2}\/\d{1,2}\/\d{4})/);
          const timeMatch = timeText.match(/(\d{1,2}:\d{2}\s*[AP]M)/i);

          if (dateMatch && timeMatch) {
            const dateStr = dateMatch[1];
            const timeStr = timeMatch[1];
            const appointmentTime = new Date(`${dateStr} ${timeStr}`);

            const bufferEnd = new Date(appointmentTime);
            bufferEnd.setMinutes(bufferEnd.getMinutes() + 15);

            const videoBtn = card.querySelector('.video-call-btn');
            if (videoBtn) {
              if (now >= appointmentTime && now <= bufferEnd) {
                videoBtn.classList.remove('disabled');
                videoBtn.disabled = false;
                videoBtn.title = "Join video call now";
              } else {
                videoBtn.classList.add('disabled');
                videoBtn.disabled = true;
                videoBtn.title = "Video call is only available at the scheduled appointment time";
              }
            }
          }
        }
      });
    }

    // Check appointment status periodically
    setInterval(checkAppointmentActive, 30000); // Check every 30 seconds
    checkAppointmentActive(); // Check on page load
  </script>


</body>

</html>